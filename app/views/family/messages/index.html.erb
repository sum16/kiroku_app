<% @title = "受信メッセージ一覧" %>
<h2><%= @title %></h2>

<div class="table-wrapper">

  <table class="listing">
    <tr>
      <th>送信者</th>
      <th>件名</th>
      <th>作成日時</th>
      <th>アクション</th>
    </tr>

    <% @messages.each do |m| %>
    <% p = MessagePresenter.new(m, self) %> 
    <tr>
      <td><%= p.sender %></td>
      <td><%= p.truncated_subject %></td>
      <td><%= p.created_at %></td>
      <td class="actions">
        <%= link_to "詳細", family_message_path(m) %>
        <%= button_to "削除", family_message_path(m), method: :delete, data: { confirm: "本当に削除しますか？"} %>
      </td>
    </tr>
    <% end %>
    </table>

  <%= paginate @messages %>
</div>
